(this.webpackJsonp34835_BryanKenneth_Week08=this.webpackJsonp34835_BryanKenneth_Week08||[]).push([[1],{70:function(e,t,n){var r={"./ion-action-sheet.entry.js":[96,7],"./ion-alert.entry.js":[97,8],"./ion-app_8.entry.js":[98,9],"./ion-avatar_3.entry.js":[99,19],"./ion-back-button.entry.js":[100,20],"./ion-backdrop.entry.js":[101,49],"./ion-button_2.entry.js":[102,21],"./ion-card_5.entry.js":[103,22],"./ion-checkbox.entry.js":[104,23],"./ion-chip.entry.js":[105,24],"./ion-col_3.entry.js":[106,50],"./ion-datetime_3.entry.js":[107,12],"./ion-fab_3.entry.js":[108,25],"./ion-img.entry.js":[109,51],"./ion-infinite-scroll_2.entry.js":[110,52],"./ion-input.entry.js":[111,26],"./ion-item-option_3.entry.js":[112,27],"./ion-item_8.entry.js":[113,28],"./ion-loading.entry.js":[114,29],"./ion-menu_3.entry.js":[115,30],"./ion-modal.entry.js":[116,10],"./ion-nav_2.entry.js":[117,16],"./ion-popover.entry.js":[118,11],"./ion-progress-bar.entry.js":[119,31],"./ion-radio_2.entry.js":[120,32],"./ion-range.entry.js":[121,33],"./ion-refresher_2.entry.js":[122,13],"./ion-reorder_2.entry.js":[123,18],"./ion-ripple-effect.entry.js":[124,53],"./ion-route_4.entry.js":[125,34],"./ion-searchbar.entry.js":[126,35],"./ion-segment_2.entry.js":[127,36],"./ion-select_3.entry.js":[128,37],"./ion-slide_2.entry.js":[129,54],"./ion-spinner.entry.js":[130,15],"./ion-split-pane.entry.js":[131,55],"./ion-tab-bar_2.entry.js":[132,38],"./ion-tab_2.entry.js":[133,17],"./ion-text.entry.js":[134,39],"./ion-textarea.entry.js":[135,40],"./ion-toast.entry.js":[136,41],"./ion-toggle.entry.js":[137,14],"./ion-virtual-scroll.entry.js":[138,56]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=70,e.exports=o},72:function(e,t,n){var r={"./ion-icon.entry.js":[139,71]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=72,e.exports=o},90:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){var r={"./pwa-action-sheet.entry.js":[144,63],"./pwa-camera-modal-instance.entry.js":[145,64],"./pwa-camera-modal.entry.js":[146,65],"./pwa-camera.entry.js":[147,66],"./pwa-toast.entry.js":[148,67]};function o(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],o=t[0];return n.e(t[1]).then((function(){return n(o)}))}o.keys=function(){return Object.keys(r)},o.id=93,e.exports=o},94:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(24),i=n.n(c),s=n(23),a=n(3),j=n(57),l=n(14),d=(n(80),n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),o.a.createContext({memories:[],addMemory:function(){},initContext:function(){}})),u=n(28),b=n(1),h=function(e){var t=Object(r.useContext)(d),n={width:"100%",height:"140px"},o=t.memories.filter((function(t){return t.type===e.memory}));return Object(b.jsxs)(a.l,{children:[0===o.length&&Object(b.jsx)(a.u,{children:Object(b.jsx)(a.h,{className:"ion-text-center",children:Object(b.jsx)("h2",{children:"No good memories found"})})}),o.map((function(e){return Object(b.jsx)(a.u,{children:Object(b.jsx)(a.h,{children:Object(b.jsx)(a.e,{children:Object(b.jsxs)(a.f,{children:[Object(b.jsx)("img",{src:e.base64Url,alt:e.title}),Object(b.jsxs)(u.a,{mapContainerStyle:n,center:{lat:e.lat,lng:e.lng},zoom:18,children:[Object(b.jsx)(u.c,{position:{lat:e.lat,lng:e.lng}}),Object(b.jsx)(b.Fragment,{})]}),Object(b.jsx)(a.g,{children:e.title})]})})})},e.id)}))]})},O=function(){Object(r.useContext)(d).memories.filter((function(e){return"good"===e.type}));return Object(b.jsxs)(a.r,{children:[Object(b.jsx)(a.m,{children:Object(b.jsxs)(a.B,{children:[Object(b.jsx)(a.A,{children:"Good Memories"}),Object(a.K)("ios")&&Object(b.jsx)(a.d,{slot:"end",children:Object(b.jsx)(a.c,{routerLink:"/NewMemory",children:Object(b.jsx)(a.n,{icon:l.a})})})]})}),Object(b.jsxs)(a.i,{children:[!Object(a.K)("ios")&&Object(b.jsx)(a.j,{vertical:"bottom",horizontal:"end",slot:"fixed",children:Object(b.jsx)(a.k,{routerLink:"/NewMemory",children:Object(b.jsx)(a.n,{icon:l.a})})}),Object(b.jsx)(h,{memory:"good"})]})]})},x=function(){return Object(b.jsxs)(a.r,{children:[Object(b.jsx)(a.m,{children:Object(b.jsxs)(a.B,{children:[Object(b.jsx)(a.A,{children:"Bad Memories"}),Object(a.K)("ios")&&Object(b.jsx)(a.d,{slot:"end",children:Object(b.jsx)(a.c,{routerLink:"/NewMemory",children:Object(b.jsx)(a.n,{icon:l.a})})})]})}),Object(b.jsxs)(a.i,{children:[!Object(a.K)("ios")&&Object(b.jsx)(a.j,{vertical:"bottom",horizontal:"end",slot:"fixed",children:Object(b.jsx)(a.k,{routerLink:"/NewMemory",children:Object(b.jsx)(a.n,{icon:l.a})})}),Object(b.jsx)(h,{memory:"bad"})]})]})},m=n(4),f=n.n(m),y=n(11),p=n(18),g=n(40),v=(n(92),n(63)),w=n(32),k=n(60),_=function(){var e=Object(r.useContext)(d),t=Object(s.e)(),n=Object(r.useState)("good"),o=Object(p.a)(n,2),c=o[0],i=o[1],j=Object(r.useRef)(null),h=Object(r.useState)(-6.257377926995551),O=Object(p.a)(h,2),x=O[0],m=O[1],_=Object(r.useState)(106.61829861017398),M=Object(p.a)(_,2),C=M[0],N=M[1],P=function(){var e=Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getCurrentPosition({enableHighAccuracy:!0});case 2:t=e.sent,console.log("Current position: ",t),console.log("Lat: ",t.coords.latitude),console.log("Lng:",t.coords.longitude),m(t.coords.latitude),N(t.coords.longitude);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){P()}),[]);var L=function(){var n=Object(y.a)(f.a.mark((function n(){var r,o,i,s;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((o=null===(r=j.current)||void 0===r?void 0:r.value)&&0!==o.toString().trim().length&&E&&c){n.next=3;break}return n.abrupt("return");case 3:return i=(new Date).getTime()+".jpeg",n.next=6,Object(k.a)(E.preview);case 6:return s=n.sent,n.next=9,w.b.writeFile({path:i,data:s,directory:w.a.Data});case 9:e.addMemory(i,s,o.toString(),c,x,C),t.length>0?t.goBack():t.replace("/goodmemories");case 11:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),S=Object(r.useState)(),B=Object(p.a)(S,2),E=B[0],F=B[1],T=function(){var e=Object(y.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.a.getPhoto({resultType:g.b.Uri,source:g.c.Camera,quality:80,width:500}),console.log(t),e.t0=!t,e.t0){e.next=7;break}return e.next=6,t;case 6:e.t0=!e.sent.webPath;case 7:if(!e.t0){e.next=9;break}return e.abrupt("return");case 9:return e.t1=F,e.next=12,t;case 12:return e.t2=e.sent.path,e.next=15,t;case 15:e.t3=e.sent.webPath,e.t4={path:e.t2,preview:e.t3},(0,e.t1)(e.t4);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(a.r,{children:[Object(b.jsxs)(a.B,{children:[Object(b.jsx)(a.d,{slot:"start",children:Object(b.jsx)(a.b,{defaultHref:"/"})}),Object(b.jsx)(a.A,{children:"New Memory"})]}),Object(b.jsxs)(a.i,{children:[Object(b.jsx)(a.u,{className:"ion-margin-top border",children:Object(b.jsx)(a.h,{children:Object(b.jsxs)(a.p,{children:[Object(b.jsx)(a.q,{position:"floating",children:"Input Title"}),Object(b.jsx)(a.o,{type:"text",ref:j})]})})}),Object(b.jsx)(a.u,{children:Object(b.jsx)(a.h,{className:"ion-text-left",children:Object(b.jsxs)(a.v,{onIonChange:function(e){var t=e.detail.value;i(t)},value:c,children:[Object(b.jsx)(a.w,{value:"good",children:"Good Memory"}),Object(b.jsx)(a.w,{value:"bad",children:"Bad Memory"})]})})}),Object(b.jsx)(a.u,{className:"ion-text-center",children:Object(b.jsxs)(a.h,{children:[Object(b.jsx)("div",{className:"image-preview-wrapper",children:Object(b.jsxs)("div",{className:"image-preview",children:[!E&&Object(b.jsx)("h3",{children:"No photo chosen."}),E&&Object(b.jsx)("img",{src:E.preview,alt:"Preview"})]})}),Object(b.jsxs)(a.c,{fill:"clear",onClick:T,children:[Object(b.jsx)(a.n,{slot:"start",icon:l.c}),Object(b.jsx)(a.q,{children:"Take Photo"})]})]})}),Object(b.jsxs)(u.a,{mapContainerStyle:{width:"100%",height:"40%",justifyContent:"center"},center:{lat:x,lng:C},zoom:18,onClick:function(e){var t,n,r,o;(null===(t=e.latLng)||void 0===t?void 0:t.lat())&&m(null===(r=e.latLng)||void 0===r?void 0:r.lat());(null===(n=e.latLng)||void 0===n?void 0:n.lng())&&N(null===(o=e.latLng)||void 0===o?void 0:o.lng())},children:[Object(b.jsx)(u.c,{position:{lat:x,lng:C}}),Object(b.jsx)(b.Fragment,{})]}),Object(b.jsx)(a.u,{className:"ion-margin-top",children:Object(b.jsx)(a.h,{className:"ion-text-center",children:Object(b.jsx)(a.c,{onClick:L,children:"Add Memory"})})})]})]})},M=function(){var e=Object(r.useContext)(d).initContext;return Object(r.useEffect)((function(){e()}),[e]),Object(b.jsxs)(a.a,{children:[Object(b.jsx)("h2",{children:"This works!"}),Object(b.jsx)(j.a,{children:Object(b.jsx)(u.b,{googleMapsApiKey:"AIzaSyB9liAgEJWuL6TC9aUWj76xG09M8-t6kOw",children:Object(b.jsxs)(a.z,{children:[Object(b.jsxs)(a.t,{id:"main",children:[Object(b.jsx)(s.b,{exact:!0,path:"/goodmemories",component:O}),Object(b.jsx)(s.b,{exact:!0,path:"/badMemories",component:x}),Object(b.jsx)(s.b,{exact:!0,path:"/newMemory",component:_}),Object(b.jsx)(s.a,{exact:!0,from:"/",to:"/goodMemories"})]}),Object(b.jsxs)(a.x,{slot:"bottom",defaultValue:"Good Memories",children:[Object(b.jsxs)(a.y,{tab:"Good Memories",href:"/goodmemories",children:[Object(b.jsx)(a.n,{icon:l.j}),Object(b.jsx)(a.q,{children:"Good Memories"})]}),Object(b.jsxs)(a.y,{tab:"Bad Memories",href:"/badMemories",children:[Object(b.jsx)(a.n,{icon:l.o}),Object(b.jsx)(a.q,{children:"Bad Memories"})]})]})]})})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var C=function(e){e&&e instanceof Function&&n.e(72).then(n.bind(null,167)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),c(e),i(e)}))},N=n(62),P=n(29),L=n(53),S=n(46),B=function(e){var t=w.b,n=Object(r.useState)([]),o=Object(p.a)(n,2),c=o[0],i=o[1];Object(r.useEffect)((function(){var e=c.map((function(e){return{id:e.id,title:e.title,imagePath:e.imagePath,type:e.type,lat:e.lat,lng:e.lng}}));S.a.set({key:"memories",value:JSON.stringify(e)})}),[c]);var s=Object(r.useCallback)(Object(y.a)(f.a.mark((function e(){var n,r,o,c,s,a,j;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get({key:"memories"});case 2:n=e.sent,r=n.value?JSON.parse(n.value):[],o=[],c=Object(L.a)(r),e.prev=6,c.s();case 8:if((s=c.n()).done){e.next=16;break}return a=s.value,e.next=12,t.readFile({path:a.imagePath,directory:w.a.Data});case 12:j=e.sent,o.push({id:a.id,title:a.title,type:a.type,imagePath:a.imagePath,base64Url:"data:image/jpeg;base64,"+j.data,lat:a.lat,lng:a.lng});case 14:e.next=8;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6),c.e(e.t0);case 21:return e.prev=21,c.f(),e.finish(21);case 24:i(o);case 25:case"end":return e.stop()}}),e,null,[[6,18,21,24]])}))),[]);return Object(b.jsx)(d.Provider,{value:{memories:c,addMemory:function(e,t,n,r,o,c){var s={id:Math.random().toString(),title:n,type:r,imagePath:e,base64Url:t,lat:o,lng:c};console.log(o),console.log(c),i((function(e){return[].concat(Object(P.a)(e),[s])}))},initContext:s},children:e.children})};i.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(B,{children:Object(b.jsx)(M,{})})}),document.getElementById("root")),Object(N.a)(window),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),C()}},[[94,3,6]]]);
//# sourceMappingURL=main.cc553c0d.chunk.js.map